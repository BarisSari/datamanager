{"ast":null,"code":"import _objectSpread from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/packages/webapp/src/views/Infrastructure/index.jsx\";\nimport React, { Component } from 'react';\nimport Markup from './Markup';\n\nvar Infrastructure =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Infrastructure, _Component);\n\n  function Infrastructure(props) {\n    var _this;\n\n    _classCallCheck(this, Infrastructure);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Infrastructure).call(this, props));\n    var _this$props = _this.props,\n        initialDetails = _this$props.details,\n        projectId = _this$props.projectId,\n        _this$props$projects = _this$props.projects,\n        projects = _this$props$projects === void 0 ? [] : _this$props$projects;\n    var fixedSlugs = projects.map(function (_ref) {\n      var rawId = _ref.id,\n          other = _objectWithoutProperties(_ref, [\"id\"]);\n\n      return _objectSpread({\n        id: rawId.replace(/^\\/infrastructure-projects\\//g, '')\n      }, other);\n    });\n    _this.state = {\n      id: !!projectId ? fixedSlugs.findIndex(function (_ref2) {\n        var id = _ref2.id;\n        return id === projectId;\n      }) : 0,\n      details: initialDetails || !!projectId || false\n    };\n    _this.events = {\n      nextId: _this.nextId.bind(_assertThisInitialized(_this))\n    };\n    return _this;\n  }\n\n  _createClass(Infrastructure, [{\n    key: \"toggleDetails\",\n    value: function toggleDetails() {\n      var details = this.state.details;\n      this.setState({\n        details: !details\n      });\n    }\n  }, {\n    key: \"nextId\",\n    value: function nextId(value) {\n      var _this$state = this.state,\n          id = _this$state.id,\n          details = _this$state.details;\n      var projects = this.props.projects;\n      var max = projects.length;\n\n      if (!details) {\n        window.history.pushState({}, window.document.title, \"/infrastructure-projects?preview=\".concat(id));\n      } else {\n        if (value === true && value < max) {\n          window.history.pushState({}, window.document.title, projects[id + 1].id);\n        }\n\n        if (value === false && id > 0) {\n          window.history.pushState({}, window.document.title, projects[id - 1].id);\n        }\n      }\n\n      if (value === true && value < max) {\n        this.setState({\n          id: id + 1\n        });\n      }\n\n      if (value === false && id > 0) {\n        this.setState({\n          id: id - 1\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var props = this.props,\n          state = this.state,\n          events = this.events;\n      var passedProps = {\n        id: state.id,\n        projects: props.projects || [],\n        points: props.points || [],\n        nextId: events.nextId,\n        details: state.details,\n        toggleDetails: events.toggleDetails,\n        datasetUrl: props.datasetUrl,\n        budgetReviewUrl: props.budgetReviewUrl,\n        Link: props.Link,\n        chartData: props.chartData\n      };\n      return React.createElement(Markup, Object.assign({}, passedProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Infrastructure;\n}(Component);\n\nexport default Infrastructure;","map":{"version":3,"sources":["/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/packages/webapp/src/views/Infrastructure/index.jsx"],"names":["React","Component","Markup","Infrastructure","props","initialDetails","details","projectId","projects","fixedSlugs","map","rawId","id","other","replace","state","findIndex","events","nextId","bind","setState","value","max","length","window","history","pushState","document","title","passedProps","points","toggleDetails","datasetUrl","budgetReviewUrl","Link","chartData"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,UAAnB;;IAGMC,c;;;;;AACJ,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,wFAAMA,KAAN;AADiB,sBAMb,MAAKA,KANQ;AAAA,QAGNC,cAHM,eAGfC,OAHe;AAAA,QAIfC,SAJe,eAIfA,SAJe;AAAA,2CAKfC,QALe;AAAA,QAKfA,QALe,qCAKJ,EALI;AAQjB,QAAMC,UAAU,GAAGD,QAAQ,CAACE,GAAT,CAAa;AAAA,UAAOC,KAAP,QAAGC,EAAH;AAAA,UAAiBC,KAAjB;;AAAA;AAC9BD,QAAAA,EAAE,EAAED,KAAK,CAACG,OAAN,CAAc,+BAAd,EAA+C,EAA/C;AAD0B,SAE3BD,KAF2B;AAAA,KAAb,CAAnB;AAKA,UAAKE,KAAL,GAAa;AACXH,MAAAA,EAAE,EAAE,CAAC,CAACL,SAAF,GAAcE,UAAU,CAACO,SAAX,CAAqB;AAAA,YAAGJ,EAAH,SAAGA,EAAH;AAAA,eAAYA,EAAE,KAAKL,SAAnB;AAAA,OAArB,CAAd,GAAmE,CAD5D;AAEXD,MAAAA,OAAO,EAAED,cAAc,IAAI,CAAC,CAACE,SAApB,IAAiC;AAF/B,KAAb;AAKA,UAAKU,MAAL,GAAc;AACZC,MAAAA,MAAM,EAAE,MAAKA,MAAL,CAAYC,IAAZ;AADI,KAAd;AAlBiB;AAqBlB;;;;oCAEe;AAAA,UACNb,OADM,GACM,KAAKS,KADX,CACNT,OADM;AAEd,WAAKc,QAAL,CAAc;AAAEd,QAAAA,OAAO,EAAE,CAACA;AAAZ,OAAd;AACD;;;2BAEMe,K,EAAO;AAAA,wBACY,KAAKN,KADjB;AAAA,UACJH,EADI,eACJA,EADI;AAAA,UACAN,OADA,eACAA,OADA;AAAA,UAEJE,QAFI,GAES,KAAKJ,KAFd,CAEJI,QAFI;AAGZ,UAAMc,GAAG,GAAGd,QAAQ,CAACe,MAArB;;AAEA,UAAI,CAACjB,OAAL,EAAc;AACZkB,QAAAA,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyB,EAAzB,EAA6BF,MAAM,CAACG,QAAP,CAAgBC,KAA7C,6CAAwFhB,EAAxF;AACD,OAFD,MAEO;AACL,YAAIS,KAAK,KAAK,IAAV,IAAkBA,KAAK,GAAGC,GAA9B,EAAmC;AACjCE,UAAAA,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyB,EAAzB,EAA6BF,MAAM,CAACG,QAAP,CAAgBC,KAA7C,EAAoDpB,QAAQ,CAACI,EAAE,GAAG,CAAN,CAAR,CAAiBA,EAArE;AACD;;AAED,YAAIS,KAAK,KAAK,KAAV,IAAmBT,EAAE,GAAG,CAA5B,EAA+B;AAC7BY,UAAAA,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyB,EAAzB,EAA6BF,MAAM,CAACG,QAAP,CAAgBC,KAA7C,EAAoDpB,QAAQ,CAACI,EAAE,GAAG,CAAN,CAAR,CAAiBA,EAArE;AACD;AAEF;;AAED,UAAIS,KAAK,KAAK,IAAV,IAAkBA,KAAK,GAAGC,GAA9B,EAAmC;AACjC,aAAKF,QAAL,CAAc;AAAER,UAAAA,EAAE,EAAEA,EAAE,GAAG;AAAX,SAAd;AACD;;AAED,UAAIS,KAAK,KAAK,KAAV,IAAmBT,EAAE,GAAG,CAA5B,EAA+B;AAC7B,aAAKQ,QAAL,CAAc;AAAER,UAAAA,EAAE,EAAEA,EAAE,GAAG;AAAX,SAAd;AACD;AACF;;;6BAEQ;AAAA,UACCR,KADD,GAC0B,IAD1B,CACCA,KADD;AAAA,UACQW,KADR,GAC0B,IAD1B,CACQA,KADR;AAAA,UACeE,MADf,GAC0B,IAD1B,CACeA,MADf;AAGP,UAAMY,WAAW,GAAG;AAClBjB,QAAAA,EAAE,EAAEG,KAAK,CAACH,EADQ;AAElBJ,QAAAA,QAAQ,EAAEJ,KAAK,CAACI,QAAN,IAAkB,EAFV;AAGlBsB,QAAAA,MAAM,EAAE1B,KAAK,CAAC0B,MAAN,IAAgB,EAHN;AAIlBZ,QAAAA,MAAM,EAAED,MAAM,CAACC,MAJG;AAKlBZ,QAAAA,OAAO,EAAES,KAAK,CAACT,OALG;AAMlByB,QAAAA,aAAa,EAAEd,MAAM,CAACc,aANJ;AAOlBC,QAAAA,UAAU,EAAE5B,KAAK,CAAC4B,UAPA;AAQlBC,QAAAA,eAAe,EAAE7B,KAAK,CAAC6B,eARL;AASlBC,QAAAA,IAAI,EAAE9B,KAAK,CAAC8B,IATM;AAUlBC,QAAAA,SAAS,EAAE/B,KAAK,CAAC+B;AAVC,OAApB;AAaA,aAAO,oBAAC,MAAD,oBAAYN,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACD;;;;EAzE0B5B,S;;AA4E7B,eAAeE,cAAf","sourcesContent":["import React, { Component } from 'react';\nimport Markup from './Markup';\n\n\nclass Infrastructure extends Component {\n  constructor(props) {\n    super(props);\n    const { \n      details: initialDetails,\n      projectId,\n      projects = [],\n    } = this.props;\n\n    const fixedSlugs = projects.map(({ id: rawId, ...other}) => ({\n      id: rawId.replace(/^\\/infrastructure-projects\\//g, ''),\n      ...other,\n    }))\n\n    this.state = {\n      id: !!projectId ? fixedSlugs.findIndex(({ id }) => id === projectId) : 0,\n      details: initialDetails || !!projectId || false,\n    }\n\n    this.events = {\n      nextId: this.nextId.bind(this),\n    }\n  }\n\n  toggleDetails() {\n    const { details } = this.state;\n    this.setState({ details: !details })\n  }\n\n  nextId(value) {\n    const { id, details } = this.state;\n    const { projects } = this.props;\n    const max = projects.length;\n\n    if (!details) {\n      window.history.pushState({}, window.document.title, `/infrastructure-projects?preview=${id}` );\n    } else {\n      if (value === true && value < max) {\n        window.history.pushState({}, window.document.title, projects[id + 1].id);\n      }\n  \n      if (value === false && id > 0) {\n        window.history.pushState({}, window.document.title, projects[id - 1].id);\n      }\n      \n    }\n\n    if (value === true && value < max) {\n      this.setState({ id: id + 1 })\n    }\n\n    if (value === false && id > 0) {\n      this.setState({ id: id - 1 });\n    }\n  }\n\n  render() {\n    const { props, state, events } = this;\n\n    const passedProps = {\n      id: state.id,\n      projects: props.projects || [],\n      points: props.points || [],\n      nextId: events.nextId,\n      details: state.details,\n      toggleDetails: events.toggleDetails,\n      datasetUrl: props.datasetUrl,\n      budgetReviewUrl: props.budgetReviewUrl,\n      Link: props.Link,\n      chartData: props.chartData,\n    }\n\n    return <Markup {...passedProps} />\n  }\n}\n\nexport default Infrastructure;\n"]},"metadata":{},"sourceType":"module"}