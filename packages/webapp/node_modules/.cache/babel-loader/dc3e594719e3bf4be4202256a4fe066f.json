{"ast":null,"code":"import _classCallCheck from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Component, createElement } from 'react';\nimport axios from 'axios';\nimport Preview from '../../views/Preview';\nimport transformData from './transformData';\n\nvar DataLoader =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DataLoader, _Component);\n\n  function DataLoader(props) {\n    var _this;\n\n    _classCallCheck(this, DataLoader);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DataLoader).call(this, props));\n    _this.state = {\n      loading: true,\n      data: null\n    };\n    return _this;\n  }\n\n  _createClass(DataLoader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          year = _this$props.year,\n          sphere = _this$props.sphere,\n          government = _this$props.government,\n          department = _this$props.department;\n      var api = \"/json/\".concat(year, \"/previews/\").concat(sphere, \"/\").concat(government, \"/original.json\");\n\n      var loadliveData = function loadliveData(_ref) {\n        var data = _ref.data;\n        return _this2.setState({\n          data: transformData(data, department),\n          loading: false\n        });\n      };\n\n      return axios.get(api).then(function (_ref2) {\n        var data = _ref2.data;\n        return data;\n      }).then(loadliveData);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var state = this.state,\n          props = this.props;\n      var loading = state.loading,\n          data = state.data;\n      var sphere = props.sphere,\n          department = props.department,\n          government = props.government,\n          year = props.year;\n\n      if (loading || !data) {\n        return createElement('div', {}, 'Loading...');\n      }\n\n      var passedProps = {\n        items: data,\n        sphere: sphere,\n        department: department,\n        government: government,\n        year: year\n      };\n      return createElement(Preview, passedProps);\n    }\n  }]);\n\n  return DataLoader;\n}(Component);\n\nexport default DataLoader;","map":{"version":3,"sources":["/home/huy/Programming/Freelancer/migrate_about_us_page_to_django/datamanager/packages/webapp/src/adaptors/preview-pages/DataLoader.js"],"names":["Component","createElement","axios","Preview","transformData","DataLoader","props","state","loading","data","year","sphere","government","department","api","loadliveData","setState","get","then","passedProps","items"],"mappings":";;;;;AAAA,SAASA,SAAT,EAAoBC,aAApB,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;;IAEMC,U;;;;;AACJ,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,oFAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE,IADE;AAEXC,MAAAA,IAAI,EAAE;AAFK,KAAb;AAHiB;AAOlB;;;;wCAEmB;AAAA;;AAAA,wBAC+B,KAAKH,KADpC;AAAA,UACVI,IADU,eACVA,IADU;AAAA,UACJC,MADI,eACJA,MADI;AAAA,UACIC,UADJ,eACIA,UADJ;AAAA,UACgBC,UADhB,eACgBA,UADhB;AAElB,UAAMC,GAAG,mBAAYJ,IAAZ,uBAA6BC,MAA7B,cAAuCC,UAAvC,mBAAT;;AAEA,UAAMG,YAAY,GAAG,SAAfA,YAAe;AAAA,YAAGN,IAAH,QAAGA,IAAH;AAAA,eACnB,MAAI,CAACO,QAAL,CAAc;AAAEP,UAAAA,IAAI,EAAEL,aAAa,CAACK,IAAD,EAAOI,UAAP,CAArB;AAAyCL,UAAAA,OAAO,EAAE;AAAlD,SAAd,CADmB;AAAA,OAArB;;AAGA,aAAON,KAAK,CACTe,GADI,CACAH,GADA,EAEJI,IAFI,CAEC;AAAA,YAAGT,IAAH,SAAGA,IAAH;AAAA,eAAcA,IAAd;AAAA,OAFD,EAGJS,IAHI,CAGCH,YAHD,CAAP;AAID;;;6BAEQ;AAAA,UACCR,KADD,GACkB,IADlB,CACCA,KADD;AAAA,UACQD,KADR,GACkB,IADlB,CACQA,KADR;AAAA,UAECE,OAFD,GAEmBD,KAFnB,CAECC,OAFD;AAAA,UAEUC,IAFV,GAEmBF,KAFnB,CAEUE,IAFV;AAAA,UAGCE,MAHD,GAG0CL,KAH1C,CAGCK,MAHD;AAAA,UAGSE,UAHT,GAG0CP,KAH1C,CAGSO,UAHT;AAAA,UAGqBD,UAHrB,GAG0CN,KAH1C,CAGqBM,UAHrB;AAAA,UAGiCF,IAHjC,GAG0CJ,KAH1C,CAGiCI,IAHjC;;AAKP,UAAIF,OAAO,IAAI,CAACC,IAAhB,EAAsB;AACpB,eAAOR,aAAa,CAAC,KAAD,EAAQ,EAAR,EAAY,YAAZ,CAApB;AACD;;AAED,UAAMkB,WAAW,GAAG;AAClBC,QAAAA,KAAK,EAAEX,IADW;AAElBE,QAAAA,MAAM,EAANA,MAFkB;AAGlBE,QAAAA,UAAU,EAAVA,UAHkB;AAIlBD,QAAAA,UAAU,EAAVA,UAJkB;AAKlBF,QAAAA,IAAI,EAAJA;AALkB,OAApB;AAOA,aAAOT,aAAa,CAACE,OAAD,EAAUgB,WAAV,CAApB;AACD;;;;EAxCsBnB,S;;AA2CzB,eAAeK,UAAf","sourcesContent":["import { Component, createElement } from 'react';\nimport axios from 'axios';\n\nimport Preview from '../../views/Preview';\nimport transformData from './transformData';\n\nclass DataLoader extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      data: null,\n    };\n  }\n\n  componentDidMount() {\n    const { year, sphere, government, department } = this.props;\n    const api = `/json/${year}/previews/${sphere}/${government}/original.json`;\n\n    const loadliveData = ({ data }) =>\n      this.setState({ data: transformData(data, department), loading: false });\n\n    return axios\n      .get(api)\n      .then(({ data }) => data)\n      .then(loadliveData);\n  }\n\n  render() {\n    const { state, props } = this;\n    const { loading, data } = state;\n    const { sphere, department, government, year } = props;\n\n    if (loading || !data) {\n      return createElement('div', {}, 'Loading...');\n    }\n\n    const passedProps = {\n      items: data,\n      sphere,\n      department,\n      government,\n      year,\n    };\n    return createElement(Preview, passedProps);\n  }\n}\n\nexport default DataLoader;\n"]},"metadata":{},"sourceType":"module"}